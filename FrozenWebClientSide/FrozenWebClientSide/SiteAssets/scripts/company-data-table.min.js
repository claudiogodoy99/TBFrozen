!function(j){j(function(){var o,n="http://localhost:64523/",t=j("#loading-modal"),d=j("#addModal"),l=j("#deleteModal"),e=j("#delete-company-form"),i=j("#editModal"),a=j("#edit-company-form"),r=j("#add-company-form"),c=j('#add-company-form [name="company-cnpj"]'),s=j('#add-company-form [name="company-description"]'),m=j('#edit-company-form [name="company-cnpj"]'),p=j('#edit-company-form [name="company-description"]');function f(e,a){void 0===a&&(a=!0),a?(j(e).removeClass("d-none"),setTimeout(function(){j(e).addClass("d-none")},5e3)):j(e).addClass("d-none")}function u(e){e.forEach(function(e){j(e).val(null)})}function h(){var a=j.Deferred(),e={url:n+"api/Empresa/listarTodos",type:"GET",contentType:"application/json; charset=utf-8"};return j.ajax(e).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()}function y(e){j("#empresa-table tbody").html(""),j("#data-results").text(e.length),0<e.length&&e.forEach(function(e){j("#empresa-table tbody").append('<tr>\n              <td style="min-width: 150px;">'+m.masked(e.cnpj)+"</td>\n              <td>"+e.descricao+'</td>\n              <td>\n                <a href="#editModal" class="edit" onclick="setItemToDeleteOrUpdateValue('+e.cnpj+')" data-toggle="modal"><i class="fa fa-pencil" aria-hidden="true" data-toggle="tooltip" title="Editar"></i></a>\n                <a href="#deleteModal" class="delete" onclick="setItemToDeleteOrUpdateValue('+e.cnpj+')" data-toggle="modal"><i class="fa fa-trash" aria-hidden="true" data-toggle="tooltip" title="Excluir"></i></a>\n              </td>\n            </tr>')})}c.mask("00.000.000/0000-00",{reverse:!0}),m.mask("00.000.000/0000-00",{reverse:!0}),t.modal(),h().done(function(e){y(e),t.modal("hide")}).fail(function(e){t.modal("hide"),f("#error-alert"),console.log(e)}),r.on("submit",function(e){e.preventDefault(),d.modal("hide"),t.modal();var a={};a.cnpj=c.cleanVal(),a.descricao=s.val();var o={url:n+"api/Empresa/Cadastrar",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(a)};j.ajax(o).done(function(e){h().done(function(e){y(e),u(['#addModal [name="company-cnpj"]','#addModal [name="company-description"]']),t.modal("hide"),f("#success-alert")}).fail(function(e){t.modal("hide"),f("#error-alert"),console.log(e)})}).fail(function(e){t.modal("hide"),f("#error-alert"),console.error(e)})}),e.on("submit",function(e){e.preventDefault(),l.modal("hide"),t.modal();var a={url:n+"api/Empresa/Deletar/"+o,contentType:"application/json; charset=utf-8",type:"DELETE"};j.ajax(a).done(function(e){h().done(function(e){y(e),t.modal("hide"),f("#success-alert")}).fail(function(e){t.modal("hide"),f("#error-alert"),console.log(e)})}).fail(function(e){t.modal("hide"),f("#error-alert"),console.error(e)})}),a.on("submit",function(e){e.preventDefault(),i.modal("hide"),t.modal();var a={};a.cnpj=m.cleanVal(),a.descricao=p.val();var o={url:n+"api/Empresa/Atualizar",contentType:"application/json; charset=utf-8",type:"PUT",data:JSON.stringify(a)};j.ajax(o).done(function(e){h().done(function(e){y(e),u(['#editModal [name="company-cnpj"]','#editModal [name="company-description"]']),t.modal("hide"),f("#success-alert")}).fail(function(e){t.modal("hide"),f("#error-alert"),console.log(e)})}).fail(function(e){t.modal("hide"),f("#error-alert"),console.error(e)})}),window.setItemToDeleteOrUpdateValue=function(e){o=e.toString(),m.val(m.masked(o))}})}(jQuery);