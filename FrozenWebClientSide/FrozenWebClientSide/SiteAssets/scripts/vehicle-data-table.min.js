!function(te){te(function(){var l,i,n,a,e,o="http://localhost:64523/",d=te("#loading-modal"),r=te("#addModal"),t=te("#deleteModal"),c=te("#delete-vehicle-form"),m=te("#editModal"),s=te("#edit-vehicle-form"),v=te("#add-vehicle-form"),u=te('#add-vehicle-form [name="vehicle-plate"]'),p=te('#add-vehicle-form [name="vehicle-type"]'),h=(te('#add-vehicle-form [name="vehicle-image"]'),te('#add-vehicle-form [name="vehicle-brand"]')),f=te('#add-vehicle-form [name="vehicle-model"]'),g=te('#add-vehicle-form [name="vehicle-year"]'),y=te('#add-vehicle-form [name="vehicle-company-cnpj"]'),x=te('#add-vehicle-form [name="vehicle-insurance"]'),C=te('#add-vehicle-form [name="vehicle-garage"]'),D=te('#add-vehicle-form [name="vehicle-condition"]'),b=te('#add-vehicle-form [name="vehicle-km"]'),j=te('#add-vehicle-form [name="vehicle-fuel"]'),I=te('#add-vehicle-form [name="vehicle-transmission"]'),S=te('#add-vehicle-form [name="vehicle-consume"]'),T=te('#add-vehicle-form [name="vehicle-places"]'),k=te('#add-vehicle-form [name="vehicle-price"]'),E=te('#add-vehicle-form [name="maintance-prev-last-date"]'),V=te('#add-vehicle-form [name="maintance-cor-last-date"]'),w=te('#add-vehicle-form [name="recharge-last-date"]'),F=te('#add-vehicle-form [name="vehicle-on-maintance"]'),M=te('#edit-vehicle-form [name="vehicle-plate"]'),G=te('#edit-vehicle-form [name="vehicle-type"]'),O=(te('#edit-vehicle-form [name="vehicle-image"]'),te('#edit-vehicle-form [name="vehicle-brand"]')),U=te('#edit-vehicle-form [name="vehicle-model"]'),q=te('#edit-vehicle-form [name="vehicle-year"]'),N=te('#edit-vehicle-form [name="vehicle-company-cnpj"]'),P=te('#edit-vehicle-form [name="vehicle-insurance"]'),A=te('#edit-vehicle-form [name="vehicle-garage"]'),J=te('#edit-vehicle-form [name="vehicle-condition"]'),L=te('#edit-vehicle-form [name="vehicle-km"]'),B=te('#edit-vehicle-form [name="vehicle-fuel"]'),z=te('#edit-vehicle-form [name="vehicle-transmission"]'),Q=te('#edit-vehicle-form [name="vehicle-consume"]'),Y=te('#edit-vehicle-form [name="vehicle-places"]'),H=te('#edit-vehicle-form [name="vehicle-price"]'),K=te('#edit-vehicle-form [name="maintance-prev-last-date"]'),R=te('#edit-vehicle-form [name="maintance-cor-last-date"]'),W=te('#edit-vehicle-form [name="recharge-last-date"]'),X=te('#edit-vehicle-form [name="vehicle-on-maintance"]'),Z=JSON.parse(localStorage.getItem("currentUser"));function $(e,a){void 0===a&&(a=!0),a?(te(e).removeClass("d-none"),setTimeout(function(){te(e).addClass("d-none")},5e3)):te(e).addClass("d-none")}function _(){var a=te.Deferred(),e={url:o+"api/Veiculo/ListarTodosDaEmpresa/"+Z.empresaCnpj,type:"GET",contentType:"application/json; charset=utf-8"};return te.ajax(e).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()}function ee(e){te("#vehicle-table tbody").html(""),te("#data-results").text(e.length),0<e.length&&e.forEach(function(e){te("#vehicle-table tbody").append('\n            <tr data-item="'+e.id+'">\n              <td style="display: none";>'+e.id+'</td>\n              <td style="display: none";>'+e.garagemId+'</td>\n              <td style="display: none";>'+e.tipoCombustivel+'</td>\n              <td style="display: none";>'+e.condicao+'</td>\n              <td style="display: none";>'+e.consumo+'</td>\n              <td style="display: none";>'+e.emViagem+'</td>\n              <td style="display: none";>'+e.km+'</td>\n              <td style="display: none";>'+e.lugares+'</td>\n              <td style="display: none";>'+e.preco+'</td>\n              <td style="display: none";>'+e.tipo+'</td>\n              <td style="display: none";>'+e.tipoCambio+'</td>\n              <td style="display: none";>'+e.tipoCombustivel+'</td>\n              <td style="display: none";>'+e.ultimaCorretiva+'</td>\n              <td style="display: none";>'+e.ultimaPreventiva+'</td>\n              <td style="display: none";>'+e.ultimoAbastecimento+'</td>\n              <td style="display: none";>'+e.imagem+'</td>\n              <td style="min-width: 100px;">'+e.placa+"</td>\n              <td>"+e.marca+"</td>\n              <td>"+e.modelo+"</td>\n              <td>"+e.ano+'</td>\n              <td style="min-width: 150px;">'+y.masked(e.empresaCnpj)+"</td>              \n              <td>"+e.seguro+"</td>\n              <td>"+("S"==e.emManutencao?"Sim":"Não")+'</td>\n              <td style="width: 130px;">\n                <a href="vehicle-master-detail.html?id='+e.id+'" class="finish-trip"><i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" title="Detalhes do Veículo"></i></a>\n                <a href="#editModal" class="edit" onclick="setItemToDeleteOrUpdateValue('+e.id+')" data-toggle="modal"><i class="fa fa-pencil" aria-hidden="true" data-toggle="tooltip" title="Editar"></i></a>\n                <a href="#deleteModal" class="delete" onclick="setItemToDeleteOrUpdateValue('+e.id+')" data-toggle="modal"><i class="fa fa-trash" aria-hidden="true" data-toggle="tooltip" title="Excluir"></i></a>\n              </td>\n            </tr>')})}function ae(e){var a=new Date(e);return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)}y.mask("00.000.000/0000-00",{reverse:!0}),N.mask("00.000.000/0000-00",{reverse:!0}),d.modal(),(a=te.Deferred(),e={url:o+"api/Garagem/ListarTodasDaEmpresa/"+Z.empresaCnpj,type:"GET",contentType:"application/json; charset=utf-8"},te.ajax(e).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()).done(function(e){!function(e){e.forEach(function(e){C.append('<option value="'+e.idGaragem+'">'+e.nome+"</option>"),A.append('<option value="'+e.idGaragem+'">'+e.nome+"</option>")})}(e),_().done(function(e){ee(e),d.modal("hide")}).fail(function(e){d.modal("hide"),$("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),$("#error-alert"),console.log(e)}),v.on("submit",function(e){e.preventDefault(),r.modal("hide"),d.modal();var a={id:null};a.placa=u.val(),a.tipo=p.val(),document.querySelector("#customFile").files&&document.querySelector("#customFile").files[0]?a.imagem="C:/Users/Gabriel/Desktop/"+document.querySelector("#customFile").files[0].name:a.imagem=null,a.marca=h.val(),a.modelo=f.val(),a.ano=parseInt(g.val()),a.condicao=D.val(),a.km=parseInt(b.val()),a.tipoCambio=I.val(),a.tipoCombustivel=j.val(),a.emViagem="N",a.emManutencao=F.val(),a.seguro=x.val(),a.preco=parseFloat(k.val()),a.lugares=parseInt(T.val()),a.empresaCnpj=y.cleanVal(),a.empresa=null,a.garagemId=parseInt(C.val()),a.garagem=null,a.consumo=S.val(),a.ultimaPreventiva=new Date(E.val())||null,a.ultimaCorretiva=new Date(V.val())||null,a.ultimoAbastecimento=new Date(w.val()),a.viagens=null;var t={url:o+"api/Veiculo/Cadastrar",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(a)};te.ajax(t).done(function(e){_().done(function(e){ee(e),document.getElementById("add-vehicle-form").reset(),d.modal("hide"),$("#success-alert")}).fail(function(e){d.modal("hide"),$("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),$("#error-alert"),console.error(e)})}),c.on("submit",function(e){e.preventDefault(),t.modal("hide"),d.modal();var a={url:o+"api/Veiculo/Deletar/"+l.toString(),contentType:"application/json; charset=utf-8",type:"DELETE"};te.ajax(a).done(function(e){_().done(function(e){ee(e),d.modal("hide"),$("#success-alert")}).fail(function(e){d.modal("hide"),$("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),$("#error-alert"),console.error(e)})}),s.on("submit",function(e){e.preventDefault(),m.modal("hide"),d.modal();var a={};a.id=parseInt(l),a.placa=M.val(),a.tipo=G.val(),document.querySelector("#editCustomFile").files&&document.querySelector("#editCustomFile").files[0]?a.imagem="C:/Users/Gabriel/Desktop/"+document.querySelector("#editCustomFile").files[0].name:a.imagem=n,a.marca=O.val(),a.modelo=U.val(),a.ano=parseInt(q.val()),a.condicao=J.val(),a.km=parseInt(L.val()),a.tipoCambio=z.val(),a.tipoCombustivel=B.val(),a.emViagem=i,a.emManutencao=X.val(),a.seguro=P.val(),a.preco=parseFloat(H.val()),a.lugares=parseInt(Y.val()),a.empresaCnpj=N.cleanVal(),a.empresa=null,a.garagemId=parseInt(A.val()),a.garagem=null,a.consumo=Q.val(),a.ultimaPreventiva=new Date(K.val())||null,a.ultimaCorretiva=new Date(R.val())||null,a.ultimoAbastecimento=new Date(W.val()),a.viagens=null;var t={url:o+"api/Veiculo/Atualizar",contentType:"application/json; charset=utf-8",type:"PUT",data:JSON.stringify(a)};te.ajax(t).done(function(e){_().done(function(e){ee(e),document.getElementById("edit-vehicle-form").reset(),d.modal("hide"),$("#success-alert")}).fail(function(e){d.modal("hide"),$("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),$("#error-alert"),console.error(e)})}),window.setItemToDeleteOrUpdateValue=function(e){var a=te('[data-item="'+(l=e)+'"]').find("td");A.val(te(a[1]).text()),B.val(te(a[2]).text()),J.val(te(a[3]).text()),Q.val(te(a[4]).text()),i=te(a[5]).text(),L.val(te(a[6]).text()),Y.val(te(a[7]).text()),H.val(te(a[8]).text()),G.val(te(a[9]).text()),z.val(te(a[10]).text()),B.val(te(a[11]).text()),R.val(ae(te(a[12]).text())),K.val(ae(te(a[13]).text())),W.val(ae(te(a[14]).text())),n=te(a[15]).text(),M.val(te(a[16]).text()),O.val(te(a[17]).text()),U.val(te(a[18]).text()),q.val(te(a[19]).text()),N.val(N.masked(te(a[20]).text())),P.val(te(a[21]).text()),X.val("Sim"==te(a[22]).text()?"S":"N")}})}(jQuery);