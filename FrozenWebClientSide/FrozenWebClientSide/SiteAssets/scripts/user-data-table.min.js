!function(w){w(function(){var t,o="http://localhost:64523/",d=w("#loading-modal"),r=w("#addModal"),n=w("#deleteModal"),e=w("#delete-user-form"),l=w("#editModal"),a=w("#edit-user-form"),s=w("#add-user-form"),i=w('#add-user-form [name="user-name"]'),m=w('#add-user-form [name="user-password"]'),u=w('#add-user-form [name="user-email"]'),c=w('#add-user-form [name="user-company-cnpj"]'),f=w('#add-user-form [name="user-address"]'),p=w('#add-user-form [name="user-phone"]'),h=w('#edit-user-form [name="user-name"]'),v=w('#edit-user-form [name="user-password"]'),y=w('#edit-user-form [name="user-email"]'),g=w('#edit-user-form [name="user-company-cnpj"]'),j=w('#edit-user-form [name="user-address"]'),M=w('#edit-user-form [name="user-phone"]');function x(e,a){void 0===a&&(a=!0),a?(w(e).removeClass("d-none"),setTimeout(function(){w(e).addClass("d-none")},5e3)):w(e).addClass("d-none")}function T(e){e.forEach(function(e){w(e).val(null)})}function k(){var a=w.Deferred(),e={url:o+"api/Usuario/ListarTodosDaEmpresa/12123232323232",type:"GET",contentType:"application/json; charset=utf-8"};return w.ajax(e).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()}function D(e){w("#user-table tbody").html(""),w("#data-results").text(e.length),0<e.length&&e.forEach(function(e){w("#user-table tbody").append('\n            <tr data-item="'+e.id+'">\n              <td class="d-none">'+e.id+'</td>\n              <td class="d-none">'+e.senha+"</td>\n              <td>"+e.nome+"</td>\n              <td>"+e.email+'</td>\n              <td style="min-width: 150px;">'+e.endereco+'</td>\n              <td style="min-width: 150px;">'+p.masked(e.telefone)+'</td>\n              <td style="min-width: 150px;">'+c.masked(e.empresaCnpj)+'</td>\n              <td>\n                <a href="#editModal" class="edit" onclick="setItemToDeleteOrUpdateValue('+e.id+')" data-toggle="modal"><i class="fa fa-pencil" aria-hidden="true" data-toggle="tooltip" title="Editar"></i></a>\n                <a href="#deleteModal" class="delete" onclick="setItemToDeleteOrUpdateValue('+e.id+')" data-toggle="modal"><i class="fa fa-trash" aria-hidden="true" data-toggle="tooltip" title="Excluir"></i></a>\n              </td>\n            </tr>')})}c.mask("00.000.000/0000-00",{reverse:!0}),p.mask("(00) 00000-0000"),g.mask("00.000.000/0000-00",{reverse:!0}),M.mask("(00) 00000-0000"),d.modal(),k().done(function(e){D(e),d.modal("hide")}).fail(function(e){d.modal("hide"),x("#error-alert"),console.log(e)}),s.on("submit",function(e){e.preventDefault(),r.modal("hide"),d.modal();var a={};a.nome=i.val(),a.email=u.val(),a.senha=m.val(),a.empresaCnpj=c.cleanVal(),a.endereco=f.val(),a.telefone=p.cleanVal();var n={url:o+"api/Usuario/Cadastrar",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(a)};w.ajax(n).done(function(e){k().done(function(e){D(e),T(['#addModal [name="user-name"]','#addModal [name="user-email"]','#addModal [name="user-password"]','#addModal [name="user-company-cnpj"]','#addModal [name="user-phone"]','#addModal [name="user-address"]']),d.modal("hide"),x("#success-alert")}).fail(function(e){d.modal("hide"),x("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),x("#error-alert"),console.error(e)})}),e.on("submit",function(e){e.preventDefault(),n.modal("hide"),d.modal();var a={url:o+"api/Usuario/Deletar/"+t.toString(),contentType:"application/json; charset=utf-8",type:"DELETE"};w.ajax(a).done(function(e){k().done(function(e){D(e),d.modal("hide"),x("#success-alert")}).fail(function(e){d.modal("hide"),x("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),x("#error-alert"),console.error(e)})}),a.on("submit",function(e){e.preventDefault(),l.modal("hide"),d.modal();var a={};a.id=t,a.nome=h.val(),a.email=y.val(),a.senha=v.val(),a.empresaCnpj=g.cleanVal(),a.endereco=j.val(),a.telefone=M.cleanVal();var n={url:o+"api/Usuario/Atualizar",contentType:"application/json; charset=utf-8",type:"PUT",data:JSON.stringify(a)};w.ajax(n).done(function(e){k().done(function(e){D(e),T(['#editModal [name="user-name"]','#editModal [name="user-email"]','#editModal [name="user-password"]','#editModal [name="user-company-cnpj"]','#editModal [name="user-phone"]','#editModal [name="user-address"]']),d.modal("hide"),x("#success-alert")}).fail(function(e){d.modal("hide"),x("#error-alert"),console.log(e)})}).fail(function(e){d.modal("hide"),x("#error-alert"),console.error(e)})}),window.setItemToDeleteOrUpdateValue=function(e){var a=w('[data-item="'+(t=e)+'"]').find("td");v.val(w(a[1]).text()),h.val(w(a[2]).text()),y.val(w(a[3]).text()),j.val(w(a[4]).text()),M.val(M.masked(w(a[5]).text())),g.val(g.masked(w(a[6]).text()))}})}(jQuery);